// संस्कृत-असेंबलर चालक — केवल संस्कृत-कोड (Phase 1)
// प्रयोजनम्: `.अस` स्रोतं पठित्वा `असेंबल_से_कोड` आह्वाय हेक्स/बाइनरी निर्गमं ददाति।

आयात असेंबलर.असेंबलक  // असेंबल_से_कोड

कार्य हेक्स_वर्ण(ब: अष्टक): श्रृंखला {
  अंक = "0123456789abcdef"
  उच्च = (ब >> 4) & 0xF
  नीच = (ब     ) & 0xF
  लौटय अंक[उच्च] + अंक[नीच]
}

कार्य मुद्रय_हेक्स(कोड: सूची<अष्टक>): शून्य {
  सू = 0
  जबकि (सू < दीर्घता(कोड)) {
    यदि (सू > 0) { लिख(" ") }
    लिख(हेक्स_वर्ण(कोड[सू]))
    सू = सू + 1
  }
  लिख("\n")
}

// नोटः: `पठन`/`लेखन` वर्तेते इति मान्यते (Phase 0 I/O)
कार्य चालक_परीक्षण(पथ: श्रृंखला, विधा: श्रृंखला, निर्गम: वैकल्पिक<श्रृंखला>): शून्य {
  स्रोत = पठन(पथ)
  कोड = असेंबल_से_कोड(स्रोत)
  यदि (विधा == "hex") {
    मुद्रय_हेक्स(कोड)
    लौटय
  }
  यदि (विधा == "bin") {
    यदि (निर्गम != रिक्त) { लेखन(निर्गम, कोड) } अन्यथा { लिख("निर्गम-पथ आवश्यकः\n") }
    लौटय
  }
  // डिफ़ॉल्टम्: हेक्स
  मुद्रय_हेक्स(कोड)
}


